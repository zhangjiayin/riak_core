<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Module slide</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module slide</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>Keep track of thing in a sliding time window.


<h2><a name="description">Description</a></h2><p>Keep track of thing in a sliding time window.  The idea here       
is that you have some reading to take several times.       
Occasionally, you want to compute some aggregation of those       
readings for the last N seconds.</p>
 
       <p>For example, you might read the weight of cars passing a point       
in the road.  You want to compute some statistics every hour.       
You could:</p>
 
       <p>%% create a new slide, with an hour window       
T0 = slide:fresh(60*60)</p>
 
       <p>%% update it every time a car passes       
T1 = slide:update(T0, Weight, slide:moment())</p>
 
       %% eventually ask for stats
       {NumberOfCars, TotalWeight} = slide:sum(TN, slide:moment())
       {NumberOfCars, AverageWeight} = slide:mean(TN, slide:moment())
       {NumberOfCars, {MedianWeight,
                       NinetyFivePercentWeight,
                       NinetyNinePercentWeight,
                       HeaviestWeight} = slide:nines(TN, slide:moment())
<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#fresh-0">fresh/0</a></td><td>Equivalent to <a href="#fresh-1"><tt>fresh(60)</tt></a>.
</td></tr>
<tr><td valign="top"><a href="#fresh-1">fresh/1</a></td><td>Equivalent to <a href="#fresh-2"><tt>fresh(Window, Window)</tt></a>.
</td></tr>
<tr><td valign="top"><a href="#fresh-2">fresh/2</a></td><td>Create an empty slide for tracking Window-seconds worth of
       readings, and pruning those readings after Trigger seconds.</td></tr>
<tr><td valign="top"><a href="#mean-1">mean/1</a></td><td>Mean of readings from now through Window seconds ago.</td></tr>
<tr><td valign="top"><a href="#mean-2">mean/2</a></td><td>Mean of readings from Moment through Window seconds before Moment.</td></tr>
<tr><td valign="top"><a href="#mean-3">mean/3</a></td><td>Mean of readings from Moment through Seconds seconds before
       Moment.</td></tr>
<tr><td valign="top"><a href="#mean_and_nines-2">mean_and_nines/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#mean_and_nines-6">mean_and_nines/6</a></td><td></td></tr>
<tr><td valign="top"><a href="#moment-0">moment/0</a></td><td>Get the current time in seconds.</td></tr>
<tr><td valign="top"><a href="#nines-1">nines/1</a></td><td>Median, 95%, 99%, and 100% readings from now through Window
   seconds ago.</td></tr>
<tr><td valign="top"><a href="#nines-2">nines/2</a></td><td>Median, 95%, 99%, and 100% readings from Moment through Window
       seconds before Moment.</td></tr>
<tr><td valign="top"><a href="#nines-3">nines/3</a></td><td>Median, 95%, 99%, and 100% readings from Moment through
       Seconds seconds before Moment.</td></tr>
<tr><td valign="top"><a href="#private_dir-0">private_dir/0</a></td><td></td></tr>
<tr><td valign="top"><a href="#sum-1">sum/1</a></td><td>Sum of readings from now through Window seconds ago.</td></tr>
<tr><td valign="top"><a href="#sum-2">sum/2</a></td><td>Sum of readings from Moment through Window seconds before Moment.</td></tr>
<tr><td valign="top"><a href="#sum-3">sum/3</a></td><td>Sum of readings from Moment through Seconds seconds before
       Moment.</td></tr>
<tr><td valign="top"><a href="#sync-1">sync/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#update-2">update/2</a></td><td>Equivalent to <a href="#update-3"><tt>update(S, Reading, moment())</tt></a>.
</td></tr>
<tr><td valign="top"><a href="#update-3">update/3</a></td><td>Store a new reading.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="fresh-0">fresh/0</a></h3>
<div class="spec">
<p><tt>fresh() -&gt; <a href="#type-slide">slide()</a></tt><br></p>
</div><p>Equivalent to <a href="#fresh-1"><tt>fresh(60)</tt></a>.</p>


<h3 class="function"><a name="fresh-1">fresh/1</a></h3>
<div class="spec">
<p><tt>fresh(Window::integer()) -&gt; <a href="#type-slide">slide()</a></tt><br></p>
</div><p>Equivalent to <a href="#fresh-2"><tt>fresh(Window, Window)</tt></a>.</p>


<h3 class="function"><a name="fresh-2">fresh/2</a></h3>
<div class="spec">
<p><tt>fresh(Window::integer(), Trigger::integer()) -&gt; <a href="#type-slide">slide()</a></tt><br></p>
</div><p>Create an empty slide for tracking Window-seconds worth of
       readings, and pruning those readings after Trigger seconds.</p>

<h3 class="function"><a name="mean-1">mean/1</a></h3>
<div class="spec">
<p><tt>mean(Slide::<a href="#type-slide">slide()</a>) -&gt; {Count::integer(), Mean::number()}</tt><br></p>
</div><p>Mean of readings from now through Window seconds ago.  Return is
       number of readings in the range and the mean of those readings.</p>

<h3 class="function"><a name="mean-2">mean/2</a></h3>
<div class="spec">
<p><tt>mean(Slide::<a href="#type-slide">slide()</a>, Moment::integer()) -&gt; {Count::integer(), Mean::number()}</tt><br></p>
</div><p>Mean of readings from Moment through Window seconds before Moment.
       Return is number of readings in the range and the mean of those
       readings.</p>

<h3 class="function"><a name="mean-3">mean/3</a></h3>
<div class="spec">
<p><tt>mean(S::<a href="#type-slide">slide()</a>, Moment::integer(), Seconds::integer()) -&gt; {Count::integer(), Mean::number()}</tt><br></p>
</div><p>Mean of readings from Moment through Seconds seconds before
       Moment.  Return is number of readings in the range and the mean
       of those readings.</p>

<h3 class="function"><a name="mean_and_nines-2">mean_and_nines/2</a></h3>
<div class="spec">
<p><tt>mean_and_nines(Slide, Moment) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="mean_and_nines-6">mean_and_nines/6</a></h3>
<div class="spec">
<p><tt>mean_and_nines(Slide, Moment, HistMin, HistMax, HistBins, RoundingMode) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="moment-0">moment/0</a></h3>
<div class="spec">
<p><tt>moment() -&gt; integer()</tt><br></p>
</div><p>Get the current time in seconds.</p>

<h3 class="function"><a name="nines-1">nines/1</a></h3>
<div class="spec">
<p><tt>nines(Slide::<a href="#type-slide">slide()</a>) -&gt; {Count::integer(), {Median::number(), NinetyFive::number(), NinetyNine::number(), Hundred::number()}}</tt><br></p>
</div><p>Median, 95%, 99%, and 100% readings from now through Window
   seconds ago.  Return is number of readings in the range and the
   nines of those readings.</p>

<h3 class="function"><a name="nines-2">nines/2</a></h3>
<div class="spec">
<p><tt>nines(Slide::<a href="#type-slide">slide()</a>, Moment::integer()) -&gt; {Count::integer(), {Median::number(), NinetyFive::number(), NinetyNine::number(), Hundred::number()}}</tt><br></p>
</div><p>Median, 95%, 99%, and 100% readings from Moment through Window
       seconds before Moment.  Return is number of readings in the
       range and the nines of those readings.</p>

<h3 class="function"><a name="nines-3">nines/3</a></h3>
<div class="spec">
<p><tt>nines(Slide::<a href="#type-slide">slide()</a>, Moment::integer(), Seconds::integer()) -&gt; {Count::integer(), {Median::number(), NinetyFive::number(), NinetyNine::number(), Hundred::number()}}</tt><br></p>
</div><p>Median, 95%, 99%, and 100% readings from Moment through
       Seconds seconds before Moment.  Return is number of readings
       in the range and the nines of those readings.</p>

<h3 class="function"><a name="private_dir-0">private_dir/0</a></h3>
<div class="spec">
<p><tt>private_dir() -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="sum-1">sum/1</a></h3>
<div class="spec">
<p><tt>sum(Slide::<a href="#type-slide">slide()</a>) -&gt; {Count::integer(), Sum::integer()}</tt><br></p>
</div><p>Sum of readings from now through Window seconds ago.  Return is
       number of readings in the range and the sum of those readings.</p>

<h3 class="function"><a name="sum-2">sum/2</a></h3>
<div class="spec">
<p><tt>sum(Slide::<a href="#type-slide">slide()</a>, Moment::integer()) -&gt; {Count::integer(), Sum::integer()}</tt><br></p>
</div><p>Sum of readings from Moment through Window seconds before Moment.
       Return is number of readings in the range and the sum of those
       readings.</p>

<h3 class="function"><a name="sum-3">sum/3</a></h3>
<div class="spec">
<p><tt>sum(Slide::<a href="#type-slide">slide()</a>, Moment::integer(), Seconds::integer()) -&gt; {Count::integer(), Sum::integer()}</tt><br></p>
</div><p>Sum of readings from Moment through Seconds seconds before
       Moment.  Return is number of readings in the range and the sum
       of those readings.</p>

<h3 class="function"><a name="sync-1">sync/1</a></h3>
<div class="spec">
<p><tt>sync(S) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="update-2">update/2</a></h3>
<div class="spec">
<p><tt>update(S::<a href="#type-slide">slide()</a>, Reading::term()) -&gt; <a href="#type-slide">slide()</a></tt><br></p>
</div><p>Equivalent to <a href="#update-3"><tt>update(S, Reading, moment())</tt></a>.</p>


<h3 class="function"><a name="update-3">update/3</a></h3>
<div class="spec">
<p><tt>update(S0::<a href="#type-slide">slide()</a>, Reading0::term(), Moment::integer()) -&gt; <a href="#type-slide">slide()</a></tt><br></p>
</div><p>Store a new reading.  The current list of readings will be
       pruned if Moment is as new as or newer than the most recent
       reading stored, and more than Trigger seconds newer than the
       oldest reading stored.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Apr 27 2012, 16:05:06.</i></p>
</body>
</html>
